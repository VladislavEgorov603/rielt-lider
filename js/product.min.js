let params=window.location.search.replace("?","").split("&").reduce((function(t,a){let e=a.split("=");return t[decodeURIComponent(e[0])]=decodeURIComponent(e[1]),t}),{});function addCharacteristics(t,a){let e=$('<tr class="product__characteristics-row"><td class="product__characteristics-data">'+t+'</td><td class="product__characteristics-data">'+a+"</td></tr>");$(".product__characteristics-table").append(e)}function addDesc(t,a){let e=$('<div class="product__area-item"><h3 class="product__area-title">'+a+'</h3><span class="product__area-subtitle">'+t+"</span></div>");$(".product__area-list").append(e)}function addImage(t){$(".product__images").slick("slickAdd",'<div class="product__images-item"><img src="'+t+'" alt="" class="product__image"></div>')}function addPriceForM2(t){$(".product__info-cost").append('<span class="product__cost-for-m2">'+t+"</span>")}function outputData(t){for(i=0;i<t.length;i++){let a=t[i];if(a["@attributes"]["internal-id"]!=params.id)continue;if(null!=a.image){let t=a.image;if(t[0].length>1)for(j=0;j<t.length;j++)addImage(t[j]);else addImage(t)}else addImage("./images/placeholder.png");$(".product__code-value").text(a["@attributes"]["internal-id"]);let e,l,c=a.category,r=a.type;if("аренда"==r&&(e=a.price.period),null!=a.rooms&&(l=a.rooms),"коммерческая"!=c)l>0&&"комната"!=c?$(".product__title").text(l+"-комн. "+c):$(".product__title").text(c);else{let t;null!=a.purpose&&(t=a.purpose.value),null!=t&&$(".product__title").text(t)}let o,n="";null!=a.location.region&&(n+=a.location.region+", "),null!=a.location.district&&(n+=a.location.district+", "),null!=a.location["locality-name"]&&(n+=a.location["locality-name"]),null!=a.location.address&&(n+=", "+a.location.address),null!=a.location.apartment&&(n+=", кв. "+a.location.apartment),null!=a.location["address-full"]&&(n=a.location["address-full"]),$(".product__info-address").text(n),null!=a["creation-date"]&&(o=a["creation-date"]);let d=new Date(o);$(".product__info-date").text(d.toLocaleDateString()+" "+d.toLocaleTimeString());let s,u,p,_,m=a.price.value;$(".product__cost-value").text(new Intl.NumberFormat("ru-RU").format(m)),null!=e&&$(".product__cost").append(" в "+e),null!=a.area&&(s=a.area.value),null!=s&&("комната"==c&&null!=a["living-space"]&&(s=a["living-space"].value),u=Math.round(m/s),null!=a["price-area-base"]&&(u=a["price-area-base"].value)),null!=u&&addPriceForM2(new Intl.NumberFormat("ru-RU").format(u)),null!=a["living-space"]&&(p=a["living-space"].value),null!=a.floor&&(_=a.floor);let f,g,h,v,C,D=_;null!=a["floors-total"]&&(f=a["floors-total"],D+="/"+f),null!=a["building-type"]&&(g=a["building-type"]),null!=a["kitchen-space"]&&(h=a["kitchen-space"].value),null!=a["rooms-offered"]&&(v=a["rooms-offered"]),null!=a.description&&(C=a.description),null!=s&&addDesc("Общая площадь, кв.м.",s),null!=p&&addDesc("Жилая площадь, кв.м.",p),null!=h&&addDesc("Площадь кухни, кв.м.",h),null!=D&&addDesc("Этаж",D),null!=g&&addDesc("Тип здания",g),null!=C&&$(".product__description-text").text("").append(C),null!=r&&addCharacteristics("Тип сделки",r),null!=c&&addCharacteristics("Категория",c),null!=v&&addCharacteristics("Комнат в сделке",v),null!=l&&addCharacteristics("Общее количество комнат",l),null!=_&&addCharacteristics("Этаж",_),null!=f&&addCharacteristics("Этажей в доме",f),null!=p&&addCharacteristics("Жилая площадь, кв.м.",p),null!=h&&addCharacteristics("Площадь кухни, кв.м.",h),null!=s&&addCharacteristics("Общая площадь, кв.м.",s),null!=g&&addCharacteristics("Тип здания",g);break}}function getData(t){$.ajax({url:"get_offer.php",type:"GET",dataType:"json",data:{category:t},success:function(t){outputData(t)},error:function(t){}})}getData(params.category);